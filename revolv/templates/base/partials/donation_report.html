{% extends "base/base.html" %}
{% load staticfiles %}
{% load widget_tweaks %}
{% load mathfilters %}

{% block head %}
<link rel="stylesheet" href="{% static 'typeahead/typeahead.css' %}" />
<link rel="stylesheet" href="{% static 'chosen/chosen.css' %}" />
<link rel="stylesheet" href="{% static 'dist/css/pages/project-edit/index.css' %}" />
<link href='https://fonts.googleapis.com/css?family=Lato:300,500,800' rel='stylesheet' type='text/css'>
<link href='https://cdn.datatables.net/1.10.13/css/jquery.dataTables.min.css' rel='stylesheet' type='text/css'>
<link href='https://cdn.datatables.net/buttons/1.2.2/css/buttons.dataTables.min.css' rel='stylesheet' type='text/css'>
<style type="text/css">
    #map-canvas { width: 100%; height: 300px; margin-bottom: 20px; padding: 0;}
    #map-canvas img {max-width: none;}
</style>

 <link href = "https://code.jquery.com/ui/1.10.4/themes/ui-lightness/jquery-ui.css"
         rel = "stylesheet">
      <script src = "https://code.jquery.com/jquery-1.10.2.js"></script>
      <script src = "https://code.jquery.com/ui/1.10.4/jquery-ui.js"></script>
<script src="/static/js/jquery.dataTables.min.js"></script>
<script src="/static/js/moment.min.js"></script>
<script src="/static/js/datetime-moment.js"></script>
<script src="/static/js/dataTables.buttons.min.js"></script>
<script src="/static/js/buttons.flash.min.js"></script>
<script src="/static/js/jszip.min.js"></script>
<script src="/static/js/pdfmake.min.js"></script>
<script src="/static/js/vfs_fonts.js"></script>
<script src="/static/js/buttons.html5.min.js"></script>
<script src="/static/js/buttons.print.min.js"></script>
<script src="/static/js/donation_report.js"></script>


{% endblock %}

{% block body %}

<div class="container after-header" >
  <table id="donation_report" class="display nowrap" cellspacing="0" width="100%">
   <div id="date_range" class="form-group donation-report-padding">
       <div>
            <div class="range-label">From:</div>
            <input type="text" class="range-date" id="datepicker-1"/>
        </div>
        <div>
            <div class="range-label">To:</div>
            <input type="text" class="range-date" id="datepicker-2"/>
        </div>
    </div>
  <thead >
      <tr>
        <th>Donors Name</th>
        <th>Username</th>
         <th>Email</th>
         <th>Date</th>
        <th>Name of Project</th>
        <th>Donation to Solar Seed Fund</th>
        <th>Reinvestment in Solar Seed Fund</th>
          <th>Admin Reinvestment in Solar Seed Fund</th>
        <th>Donation to Operations</th>
        <th>Total Donations</th>
      </tr>
    </thead>
    <tbody>
    {% for payment in payments %}
    {{ payment.user.username }}
      <tr>
        <td>{{ payment.user.user.first_name }} {{ payment.user.user.last_name }}</td>
        <td>{{ payment.user.user.username }}</td>
        <td>{{ payment.user.user.email }}</td>
        <td>{{ payment.created_at|date:'Y-m-d H:i' }}</td>
        {% if payment.project %}
          <td >{{ payment.project }}</td>
        {% else %}
          <td >Revolv Oprations</td>
        {% endif %}
        {% if payment.user_reinvestment %}
          <td>$0.00</td>
          <td>${{payment.user_reinvestment.amount|floatformat:2}}</td>
          <td>$0.00</td>
        {% elif payment.admin_reinvestment %}
          <td>$0.00</td>
          <td>$0.00</td>
          <td>${{payment.amount|floatformat:2}}</td>
        {% else %}
            {% if payment.amount %}
             <td>${{ payment.amount|floatformat:2 }}</td>
            {% else  %}
             <td>$0.00</td>
             {% endif %}
            <td>$0.00</td>
            <td>$0.00</td>
         {% endif %}
        {% if payment.tip.amount %}
          <td>${{ payment.tip.amount|floatformat:2 }}</td>
        {% else %}
          <td>$0.00</td>
         {% endif %}
        {% if payment.tip.amount and payment.amount%}
          <td>${{ payment.amount|addition:payment.tip.amount|floatformat:2 }}</td>
        {% endif %}
        {% if payment.tip.amount and not payment.amount%}
          <td>${{ payment.tip.amount|floatformat:2 }}</td>
        {% endif %}
         {% if payment.amount and not payment.tip.amount %}
          <td>${{ payment.amount|floatformat:2 }}</td>
        {% endif %}
        {% if not payment.amount and not payment.tip.amount %}
          <td>$0.00</td>
        {% endif %}


      </tr>
    {% endfor %}
    </tbody>
  </table>
</div>

{% endblock %}

